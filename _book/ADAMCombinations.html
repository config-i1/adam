<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>16.4 Forecasts combinations in ADAM | Forecasting and Analytics with ADAM</title>
  <meta name="description" content="This textbook explains how to do time series analysis and forecasting using Augmented Dynamic Adaptive Model, implemented in smooth package for R." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="16.4 Forecasts combinations in ADAM | Forecasting and Analytics with ADAM" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This textbook explains how to do time series analysis and forecasting using Augmented Dynamic Adaptive Model, implemented in smooth package for R." />
  <meta name="github-repo" content="config-i1/adam" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16.4 Forecasts combinations in ADAM | Forecasting and Analytics with ADAM" />
  
  <meta name="twitter:description" content="This textbook explains how to do time series analysis and forecasting using Augmented Dynamic Adaptive Model, implemented in smooth package for R." />
  

<meta name="author" content="Ivan Svetunkov" />


<meta name="date" content="2022-02-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ETSXSelection.html"/>
<link rel="next" href="ADAMUncertainty.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XH37Z8VYP8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XH37Z8VYP8');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Forecasting and Analytics with ADAM</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="forecastingPlanningAnalytics.html"><a href="forecastingPlanningAnalytics.html"><i class="fa fa-check"></i><b>1.1</b> Forecasting, planning and analytics</a></li>
<li class="chapter" data-level="1.2" data-path="forecastingPrinciples.html"><a href="forecastingPrinciples.html"><i class="fa fa-check"></i><b>1.2</b> Forecasting principles</a></li>
<li class="chapter" data-level="1.3" data-path="typesOfForecasts.html"><a href="typesOfForecasts.html"><i class="fa fa-check"></i><b>1.3</b> Types of forecasts</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="typesOfForecasts.html"><a href="typesOfForecasts.html#typesOfForecastsPoint"><i class="fa fa-check"></i><b>1.3.1</b> Point forecasts</a></li>
<li class="chapter" data-level="1.3.2" data-path="typesOfForecasts.html"><a href="typesOfForecasts.html#typesOfForecastsInterval"><i class="fa fa-check"></i><b>1.3.2</b> Quantiles and prediction intervals</a></li>
<li class="chapter" data-level="1.3.3" data-path="typesOfForecasts.html"><a href="typesOfForecasts.html#forecast-horizon"><i class="fa fa-check"></i><b>1.3.3</b> Forecast horizon</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="modelsMethods.html"><a href="modelsMethods.html"><i class="fa fa-check"></i><b>1.4</b> Models, methods and typical assumptions</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="modelsMethods.html"><a href="modelsMethods.html#assumptions"><i class="fa fa-check"></i><b>1.4.1</b> Assumptions of statistical models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="forecastsEvaluation.html"><a href="forecastsEvaluation.html"><i class="fa fa-check"></i><b>2</b> Forecasts evaluation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="errorMeasures.html"><a href="errorMeasures.html"><i class="fa fa-check"></i><b>2.1</b> Measuring accuracy of point forecasts</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="errorMeasures.html"><a href="errorMeasures.html#an-example-in-r"><i class="fa fa-check"></i><b>2.1.1</b> An example in R</a></li>
<li class="chapter" data-level="2.1.2" data-path="errorMeasures.html"><a href="errorMeasures.html#errorMeasuresAggregate"><i class="fa fa-check"></i><b>2.1.2</b> Aggregating error measures</a></li>
<li class="chapter" data-level="2.1.3" data-path="errorMeasures.html"><a href="errorMeasures.html#errorMeasuresExampleBig"><i class="fa fa-check"></i><b>2.1.3</b> Demonstration in R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="uncertainty.html"><a href="uncertainty.html"><i class="fa fa-check"></i><b>2.2</b> Measuring uncertainty</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="uncertainty.html"><a href="uncertainty.html#example-in-r"><i class="fa fa-check"></i><b>2.2.1</b> Example in R</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="errorMeasuresSelection.html"><a href="errorMeasuresSelection.html"><i class="fa fa-check"></i><b>2.3</b> How to choose appropriate error measure</a></li>
<li class="chapter" data-level="2.4" data-path="rollingOrigin.html"><a href="rollingOrigin.html"><i class="fa fa-check"></i><b>2.4</b> Rolling origin</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rollingOrigin.html"><a href="rollingOrigin.html#principles-of-rolling-origin"><i class="fa fa-check"></i><b>2.4.1</b> Principles of Rolling origin</a></li>
<li class="chapter" data-level="2.4.2" data-path="rollingOrigin.html"><a href="rollingOrigin.html#rolling-origin-in-r"><i class="fa fa-check"></i><b>2.4.2</b> Rolling origin in R</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="statisticalTests.html"><a href="statisticalTests.html"><i class="fa fa-check"></i><b>2.5</b> Statistical comparison of forecasts</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tsDecomposition.html"><a href="tsDecomposition.html"><i class="fa fa-check"></i><b>3</b> From time series components to ETS</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tsComponents.html"><a href="tsComponents.html"><i class="fa fa-check"></i><b>3.1</b> Time series components</a></li>
<li class="chapter" data-level="3.2" data-path="ClassicalDecomposition.html"><a href="ClassicalDecomposition.html"><i class="fa fa-check"></i><b>3.2</b> Classical Seasonal Decomposition</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ClassicalDecomposition.html"><a href="ClassicalDecomposition.html#how-to-do"><i class="fa fa-check"></i><b>3.2.1</b> How to do?</a></li>
<li class="chapter" data-level="3.2.2" data-path="ClassicalDecomposition.html"><a href="ClassicalDecomposition.html#a-couple-of-examples"><i class="fa fa-check"></i><b>3.2.2</b> A couple of examples</a></li>
<li class="chapter" data-level="3.2.3" data-path="ClassicalDecomposition.html"><a href="ClassicalDecomposition.html#other-techniques"><i class="fa fa-check"></i><b>3.2.3</b> Other techniques</a></li>
<li class="chapter" data-level="3.2.4" data-path="ClassicalDecomposition.html"><a href="ClassicalDecomposition.html#why-bother"><i class="fa fa-check"></i><b>3.2.4</b> “Why bother?”</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html"><i class="fa fa-check"></i><b>3.3</b> Simple forecasting methods</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html#Naive"><i class="fa fa-check"></i><b>3.3.1</b> Naïve</a></li>
<li class="chapter" data-level="3.3.2" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html#GlobalMean"><i class="fa fa-check"></i><b>3.3.2</b> Global Mean</a></li>
<li class="chapter" data-level="3.3.3" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html#SMA"><i class="fa fa-check"></i><b>3.3.3</b> Simple Moving Average</a></li>
<li class="chapter" data-level="3.3.4" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html#RWWithDrift"><i class="fa fa-check"></i><b>3.3.4</b> Random Walk with drift</a></li>
<li class="chapter" data-level="3.3.5" data-path="simpleForecastingMethods.html"><a href="simpleForecastingMethods.html#NaiveSeasonal"><i class="fa fa-check"></i><b>3.3.5</b> Seasonal Naïve</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ETSTaxonomy.html"><a href="ETSTaxonomy.html"><i class="fa fa-check"></i><b>3.4</b> ETS taxonomy</a></li>
<li class="chapter" data-level="3.5" data-path="ETSTaxonomyMaths.html"><a href="ETSTaxonomyMaths.html"><i class="fa fa-check"></i><b>3.5</b> Mathematical models in the ETS taxonomy</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ETSConventional.html"><a href="ETSConventional.html"><i class="fa fa-check"></i><b>4</b> Conventional Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="SES.html"><a href="SES.html"><i class="fa fa-check"></i><b>4.1</b> Simple Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="SES.html"><a href="SES.html#examples-of-application"><i class="fa fa-check"></i><b>4.1.1</b> Examples of application</a></li>
<li class="chapter" data-level="4.1.2" data-path="SES.html"><a href="SES.html#whyExponential"><i class="fa fa-check"></i><b>4.1.2</b> Why “exponential?”</a></li>
<li class="chapter" data-level="4.1.3" data-path="SES.html"><a href="SES.html#SESEC"><i class="fa fa-check"></i><b>4.1.3</b> Error correction form of SES</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="SESandETS.html"><a href="SESandETS.html"><i class="fa fa-check"></i><b>4.2</b> SES and ETS</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="SESandETS.html"><a href="SESandETS.html#etsann"><i class="fa fa-check"></i><b>4.2.1</b> ETS(A,N,N)</a></li>
<li class="chapter" data-level="4.2.2" data-path="SESandETS.html"><a href="SESandETS.html#etsmnn"><i class="fa fa-check"></i><b>4.2.2</b> ETS(M,N,N)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ETSExamples.html"><a href="ETSExamples.html"><i class="fa fa-check"></i><b>4.3</b> Several examples of ETS and related exponential smoothing methods</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ETSExamples.html"><a href="ETSExamples.html#ETSAAN"><i class="fa fa-check"></i><b>4.3.1</b> ETS(A,A,N)</a></li>
<li class="chapter" data-level="4.3.2" data-path="ETSExamples.html"><a href="ETSExamples.html#ETSAAdN"><i class="fa fa-check"></i><b>4.3.2</b> ETS(A,Ad,N)</a></li>
<li class="chapter" data-level="4.3.3" data-path="ETSExamples.html"><a href="ETSExamples.html#ETSAAMModel"><i class="fa fa-check"></i><b>4.3.3</b> ETS(A,A,M)</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ets-assumptions-estimation-and-selection.html"><a href="ets-assumptions-estimation-and-selection.html"><i class="fa fa-check"></i><b>4.4</b> ETS assumptions, estimation and selection</a></li>
<li class="chapter" data-level="4.5" data-path="ETSConventionalModel.html"><a href="ETSConventionalModel.html"><i class="fa fa-check"></i><b>4.5</b> State space form of ETS</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ETSConventionalModel.html"><a href="ETSConventionalModel.html#ETSConventionalModelAdditive"><i class="fa fa-check"></i><b>4.5.1</b> Pure additive state space model</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ETSParametersBounds.html"><a href="ETSParametersBounds.html"><i class="fa fa-check"></i><b>4.6</b> Parameters bounds</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ADAMETSIntroduction.html"><a href="ADAMETSIntroduction.html"><i class="fa fa-check"></i><b>5</b> Pure additive ADAM ETS</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ADAMETSPureAdditive.html"><a href="ADAMETSPureAdditive.html"><i class="fa fa-check"></i><b>5.1</b> Model formulation</a></li>
<li class="chapter" data-level="5.2" data-path="adamETSPureAdditiveRecursive.html"><a href="adamETSPureAdditiveRecursive.html"><i class="fa fa-check"></i><b>5.2</b> Recursive relation</a></li>
<li class="chapter" data-level="5.3" data-path="pureAdditiveExpectationAndVariance.html"><a href="pureAdditiveExpectationAndVariance.html"><i class="fa fa-check"></i><b>5.3</b> Conditional expectation and variance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="pureAdditiveExpectationAndVariance.html"><a href="pureAdditiveExpectationAndVariance.html#example-with-etsann"><i class="fa fa-check"></i><b>5.3.1</b> Example with ETS(A,N,N)</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="stabilityConditionAdditiveError.html"><a href="stabilityConditionAdditiveError.html"><i class="fa fa-check"></i><b>5.4</b> Stability and forecastability conditions</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="stabilityConditionAdditiveError.html"><a href="stabilityConditionAdditiveError.html#example-with-etsann-1"><i class="fa fa-check"></i><b>5.4.1</b> Example with ETS(A,N,N)</a></li>
<li class="chapter" data-level="5.4.2" data-path="stabilityConditionAdditiveError.html"><a href="stabilityConditionAdditiveError.html#comming-back-to-the-general-case"><i class="fa fa-check"></i><b>5.4.2</b> Comming back to the general case</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ADAMETSAdditiveDistributions.html"><a href="ADAMETSAdditiveDistributions.html"><i class="fa fa-check"></i><b>5.5</b> Distributional assumptions in pure additive ETS</a></li>
<li class="chapter" data-level="5.6" data-path="ADAMETSPureAdditiveExamples.html"><a href="ADAMETSPureAdditiveExamples.html"><i class="fa fa-check"></i><b>5.6</b> Examples of application</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="ADAMETSPureAdditiveExamples.html"><a href="ADAMETSPureAdditiveExamples.html#non-seasonal-data"><i class="fa fa-check"></i><b>5.6.1</b> Non-seasonal data</a></li>
<li class="chapter" data-level="5.6.2" data-path="ADAMETSPureAdditiveExamples.html"><a href="ADAMETSPureAdditiveExamples.html#ADAMETSPureAdditiveExamplesETSAAA"><i class="fa fa-check"></i><b>5.6.2</b> Seasonal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ADAMETSPureMultiplicativeChapter.html"><a href="ADAMETSPureMultiplicativeChapter.html"><i class="fa fa-check"></i><b>6</b> Pure multiplicative ADAM ETS</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ADAMETSPureMultiplicative.html"><a href="ADAMETSPureMultiplicative.html"><i class="fa fa-check"></i><b>6.1</b> Model formulation</a></li>
<li class="chapter" data-level="6.2" data-path="adamETSPuremultiplicativeRecursive.html"><a href="adamETSPuremultiplicativeRecursive.html"><i class="fa fa-check"></i><b>6.2</b> Recursive relation</a></li>
<li class="chapter" data-level="6.3" data-path="pureMultiplicativeExpectationAndVariance.html"><a href="pureMultiplicativeExpectationAndVariance.html"><i class="fa fa-check"></i><b>6.3</b> The problem with moments in pure multiplicative ETS</a></li>
<li class="chapter" data-level="6.4" data-path="stabilityConditionMultiplicativeError.html"><a href="stabilityConditionMultiplicativeError.html"><i class="fa fa-check"></i><b>6.4</b> Smoothing parameters bounds</a></li>
<li class="chapter" data-level="6.5" data-path="ADAMETSMultiplicativeDistributions.html"><a href="ADAMETSMultiplicativeDistributions.html"><i class="fa fa-check"></i><b>6.5</b> Distributional assumptions in pure multiplicative ETS</a></li>
<li class="chapter" data-level="6.6" data-path="ADAMETSMultiplicativeExamples.html"><a href="ADAMETSMultiplicativeExamples.html"><i class="fa fa-check"></i><b>6.6</b> Examples of application</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="ADAMETSMultiplicativeExamples.html"><a href="ADAMETSMultiplicativeExamples.html#non-seasonal-data-1"><i class="fa fa-check"></i><b>6.6.1</b> Non-seasonal data</a></li>
<li class="chapter" data-level="6.6.2" data-path="ADAMETSMultiplicativeExamples.html"><a href="ADAMETSMultiplicativeExamples.html#seasonal-data"><i class="fa fa-check"></i><b>6.6.2</b> Seasonal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ADAMETSOther.html"><a href="ADAMETSOther.html"><i class="fa fa-check"></i><b>7</b> General ADAM ETS model</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ADAMETSGeneral.html"><a href="ADAMETSGeneral.html"><i class="fa fa-check"></i><b>7.1</b> Model formulation</a></li>
<li class="chapter" data-level="7.2" data-path="ADAMETSMixedModels.html"><a href="ADAMETSMixedModels.html"><i class="fa fa-check"></i><b>7.2</b> Mixed ADAM ETS models</a></li>
<li class="chapter" data-level="7.3" data-path="ADAMETSMixedModelsGroup3.html"><a href="ADAMETSMixedModelsGroup3.html"><i class="fa fa-check"></i><b>7.3</b> Mixed models with non-multiplicative trend</a></li>
<li class="chapter" data-level="7.4" data-path="ADAMETSMixedModelsGroup4.html"><a href="ADAMETSMixedModelsGroup4.html"><i class="fa fa-check"></i><b>7.4</b> Mixed models with multiplicative trend</a></li>
<li class="chapter" data-level="7.5" data-path="ADAMETSSeasonalNormalisation.html"><a href="ADAMETSSeasonalNormalisation.html"><i class="fa fa-check"></i><b>7.5</b> Normalisation of seasonal indices in ETS models</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ARIMA.html"><a href="ARIMA.html"><i class="fa fa-check"></i><b>8</b> Conventional ARIMA</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html"><i class="fa fa-check"></i><b>8.1</b> Introduction to ARIMA</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#AR"><i class="fa fa-check"></i><b>8.1.1</b> AR(p)</a></li>
<li class="chapter" data-level="8.1.2" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#MA"><i class="fa fa-check"></i><b>8.1.2</b> MA(q)</a></li>
<li class="chapter" data-level="8.1.3" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#ARMA"><i class="fa fa-check"></i><b>8.1.3</b> ARMA(p,q)</a></li>
<li class="chapter" data-level="8.1.4" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#ARMAConstant"><i class="fa fa-check"></i><b>8.1.4</b> ARMA with constant</a></li>
<li class="chapter" data-level="8.1.5" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#Differences"><i class="fa fa-check"></i><b>8.1.5</b> I(d)</a></li>
<li class="chapter" data-level="8.1.6" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#arimapdq"><i class="fa fa-check"></i><b>8.1.6</b> ARIMA(p,d,q)</a></li>
<li class="chapter" data-level="8.1.7" data-path="ARIMAIntro.html"><a href="ARIMAIntro.html#ARIMABounds"><i class="fa fa-check"></i><b>8.1.7</b> Parameters bounds</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="seasonal-arima.html"><a href="seasonal-arima.html"><i class="fa fa-check"></i><b>8.2</b> Seasonal ARIMA</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="seasonal-arima.html"><a href="seasonal-arima.html#single-seasonal-arima"><i class="fa fa-check"></i><b>8.2.1</b> Single seasonal ARIMA</a></li>
<li class="chapter" data-level="8.2.2" data-path="seasonal-arima.html"><a href="seasonal-arima.html#sarima-with-constant"><i class="fa fa-check"></i><b>8.2.2</b> SARIMA with constant</a></li>
<li class="chapter" data-level="8.2.3" data-path="seasonal-arima.html"><a href="seasonal-arima.html#MSARIMA"><i class="fa fa-check"></i><b>8.2.3</b> Multiple seasonal ARIMA</a></li>
<li class="chapter" data-level="8.2.4" data-path="seasonal-arima.html"><a href="seasonal-arima.html#MSARIMABounds"><i class="fa fa-check"></i><b>8.2.4</b> Parameters bounds for MSARIMA</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="BJApproach.html"><a href="BJApproach.html"><i class="fa fa-check"></i><b>8.3</b> Box-Jenkins approach</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="BJApproach.html"><a href="BJApproach.html#identifying-stationarity"><i class="fa fa-check"></i><b>8.3.1</b> Identifying stationarity</a></li>
<li class="chapter" data-level="8.3.2" data-path="BJApproach.html"><a href="BJApproach.html#ACF"><i class="fa fa-check"></i><b>8.3.2</b> Autocorrelation function (ACF)</a></li>
<li class="chapter" data-level="8.3.3" data-path="BJApproach.html"><a href="BJApproach.html#PACF"><i class="fa fa-check"></i><b>8.3.3</b> Partial autocorrelation function (PACF)</a></li>
<li class="chapter" data-level="8.3.4" data-path="BJApproach.html"><a href="BJApproach.html#BJApproachSummary"><i class="fa fa-check"></i><b>8.3.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html"><i class="fa fa-check"></i><b>8.4</b> ARIMA and ETS</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html#ARIMAETS011"><i class="fa fa-check"></i><b>8.4.1</b> ARIMA(0,1,1) and ETS(A,N,N)</a></li>
<li class="chapter" data-level="8.4.2" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html#ARIMAETS022"><i class="fa fa-check"></i><b>8.4.2</b> ARIMA(0,2,2) and ETS(A,A,N)</a></li>
<li class="chapter" data-level="8.4.3" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html#ARIMAETS112"><i class="fa fa-check"></i><b>8.4.3</b> ARIMA(1,1,2) and ETS(A,Ad,N)</a></li>
<li class="chapter" data-level="8.4.4" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html#ARIMAETSOther"><i class="fa fa-check"></i><b>8.4.4</b> ARIMA and other ETS models</a></li>
<li class="chapter" data-level="8.4.5" data-path="ARIMAandETS.html"><a href="ARIMAandETS.html#ets-arima"><i class="fa fa-check"></i><b>8.4.5</b> ETS + ARIMA</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="ARIMAExampleInR.html"><a href="ARIMAExampleInR.html"><i class="fa fa-check"></i><b>8.5</b> Examples of application</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="ARIMAExampleInR.html"><a href="ARIMAExampleInR.html#non-seasonal-data-2"><i class="fa fa-check"></i><b>8.5.1</b> Non-seasonal data</a></li>
<li class="chapter" data-level="8.5.2" data-path="ARIMAExampleInR.html"><a href="ARIMAExampleInR.html#ARIMAExampleInRSeasonal"><i class="fa fa-check"></i><b>8.5.2</b> Seasonal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ADAMARIMA.html"><a href="ADAMARIMA.html"><i class="fa fa-check"></i><b>9</b> ADAM ARIMA</a>
<ul>
<li class="chapter" data-level="9.1" data-path="StateSpaceARIMA.html"><a href="StateSpaceARIMA.html"><i class="fa fa-check"></i><b>9.1</b> State space ARIMA</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="StateSpaceARIMA.html"><a href="StateSpaceARIMA.html#an-example-of-state-space-arima"><i class="fa fa-check"></i><b>9.1.1</b> An example of State Space ARIMA</a></li>
<li class="chapter" data-level="9.1.2" data-path="StateSpaceARIMA.html"><a href="StateSpaceARIMA.html#StateSpaceARIMAAdditive"><i class="fa fa-check"></i><b>9.1.2</b> Additive ARIMA</a></li>
<li class="chapter" data-level="9.1.3" data-path="StateSpaceARIMA.html"><a href="StateSpaceARIMA.html#state-space-arima-with-constant"><i class="fa fa-check"></i><b>9.1.3</b> State space ARIMA with constant</a></li>
<li class="chapter" data-level="9.1.4" data-path="StateSpaceARIMA.html"><a href="StateSpaceARIMA.html#ADAMARIMAPureMultiplicative"><i class="fa fa-check"></i><b>9.1.4</b> Multiplicative ARIMA</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ADAMARIMARecursive.html"><a href="ADAMARIMARecursive.html"><i class="fa fa-check"></i><b>9.2</b> Recursive relation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="ADAMARIMARecursive.html"><a href="ADAMARIMARecursive.html#ADAMARIMARecursiveMoments"><i class="fa fa-check"></i><b>9.2.1</b> Conditional moments of ADAM ARIMA</a></li>
<li class="chapter" data-level="9.2.2" data-path="ADAMARIMARecursive.html"><a href="ADAMARIMARecursive.html#parameters-bounds"><i class="fa fa-check"></i><b>9.2.2</b> Parameters bounds</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ADAMARIMADistributions.html"><a href="ADAMARIMADistributions.html"><i class="fa fa-check"></i><b>9.3</b> Distributional assumptions of ADAM ARIMA</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="ADAMARIMADistributions.html"><a href="ADAMARIMADistributions.html#conditional-distributions"><i class="fa fa-check"></i><b>9.3.1</b> Conditional distributions</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="ETSAndARIMA.html"><a href="ETSAndARIMA.html"><i class="fa fa-check"></i><b>9.4</b> ETS + ARIMA</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="ETSAndARIMA.html"><a href="ETSAndARIMA.html#pure-additive-models"><i class="fa fa-check"></i><b>9.4.1</b> Pure additive models</a></li>
<li class="chapter" data-level="9.4.2" data-path="ETSAndARIMA.html"><a href="ETSAndARIMA.html#ADAMARIMAMultiplicative"><i class="fa fa-check"></i><b>9.4.2</b> Pure multiplicative models</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="ADAMARIMAExamples.html"><a href="ADAMARIMAExamples.html"><i class="fa fa-check"></i><b>9.5</b> Examples of application</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ADAMX.html"><a href="ADAMX.html"><i class="fa fa-check"></i><b>10</b> Explanatory variables in ADAM</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ADAMXFormulation.html"><a href="ADAMXFormulation.html"><i class="fa fa-check"></i><b>10.1</b> ADAMX: Model formulation</a></li>
<li class="chapter" data-level="10.2" data-path="ADAMXConventionalConditionalMoments.html"><a href="ADAMXConventionalConditionalMoments.html"><i class="fa fa-check"></i><b>10.2</b> Conditional expectation and variance of ADAMX</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="ADAMXConventionalConditionalMoments.html"><a href="ADAMXConventionalConditionalMoments.html#adamx-with-deterministic-explanatory-variables"><i class="fa fa-check"></i><b>10.2.1</b> ADAMX with deterministic explanatory variables</a></li>
<li class="chapter" data-level="10.2.2" data-path="ADAMXConventionalConditionalMoments.html"><a href="ADAMXConventionalConditionalMoments.html#ADAMXConventionalConditionalMomentsRandom"><i class="fa fa-check"></i><b>10.2.2</b> ADAMX with stochastic explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="ADAMXDynamic.html"><a href="ADAMXDynamic.html"><i class="fa fa-check"></i><b>10.3</b> Dynamic X in ADAMX</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="ADAMXDynamic.html"><a href="ADAMXDynamic.html#ADAMXDynamicMoments"><i class="fa fa-check"></i><b>10.3.1</b> Recursion for dynamic ADAMX</a></li>
<li class="chapter" data-level="10.3.2" data-path="ADAMXDynamic.html"><a href="ADAMXDynamic.html#conditional-moments-for-deterministic-explanatory-variables-in-adamxd"><i class="fa fa-check"></i><b>10.3.2</b> Conditional moments for deterministic explanatory variables in ADAMX{D}</a></li>
<li class="chapter" data-level="10.3.3" data-path="ADAMXDynamic.html"><a href="ADAMXDynamic.html#conditional-mean-for-stochastic-explanatory-variables-in-adamxd"><i class="fa fa-check"></i><b>10.3.3</b> Conditional mean for stochastic explanatory variables in ADAMX{D}</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="stability-and-forecastability-conditions-of-adamx.html"><a href="stability-and-forecastability-conditions-of-adamx.html"><i class="fa fa-check"></i><b>10.4</b> Stability and forecastability conditions of ADAMX</a></li>
<li class="chapter" data-level="10.5" data-path="ETSXDynamicCategories.html"><a href="ETSXDynamicCategories.html"><i class="fa fa-check"></i><b>10.5</b> Dealing with categorical variables in ADAMX</a></li>
<li class="chapter" data-level="10.6" data-path="ETSXRExample.html"><a href="ETSXRExample.html"><i class="fa fa-check"></i><b>10.6</b> Examples of application</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ADAMETSEstimation.html"><a href="ADAMETSEstimation.html"><i class="fa fa-check"></i><b>11</b> Estimation of ADAM models</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ADAMETSEstimationLikelihood.html"><a href="ADAMETSEstimationLikelihood.html"><i class="fa fa-check"></i><b>11.1</b> Maximum Likelihood Estimation</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="ADAMETSEstimationLikelihood.html"><a href="ADAMETSEstimationLikelihood.html#an-example-in-r-1"><i class="fa fa-check"></i><b>11.1.1</b> An example in R</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html"><i class="fa fa-check"></i><b>11.2</b> Non MLE-based loss functions</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html#MSEandMAEEstimators"><i class="fa fa-check"></i><b>11.2.1</b> MSE and MAE</a></li>
<li class="chapter" data-level="11.2.2" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html#ham"><i class="fa fa-check"></i><b>11.2.2</b> HAM</a></li>
<li class="chapter" data-level="11.2.3" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html#lasso-and-ridge"><i class="fa fa-check"></i><b>11.2.3</b> LASSO and RIDGE</a></li>
<li class="chapter" data-level="11.2.4" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html#custom-losses"><i class="fa fa-check"></i><b>11.2.4</b> Custom losses</a></li>
<li class="chapter" data-level="11.2.5" data-path="non-mle-based-loss-functions.html"><a href="non-mle-based-loss-functions.html#examples-in-r"><i class="fa fa-check"></i><b>11.2.5</b> Examples in R</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="multistepLosses.html"><a href="multistepLosses.html"><i class="fa fa-check"></i><b>11.3</b> Multistep losses</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="multistepLosses.html"><a href="multistepLosses.html#mathrmmse_h-mse-for-h-steps-ahead"><i class="fa fa-check"></i><b>11.3.1</b> <span class="math inline">\(\mathrm{MSE}_h\)</span> – MSE for h steps ahead</a></li>
<li class="chapter" data-level="11.3.2" data-path="multistepLosses.html"><a href="multistepLosses.html#multistepLossesTMSE"><i class="fa fa-check"></i><b>11.3.2</b> TMSE – Trace MSE</a></li>
<li class="chapter" data-level="11.3.3" data-path="multistepLosses.html"><a href="multistepLosses.html#multistepLossesGTMSE"><i class="fa fa-check"></i><b>11.3.3</b> GTMSE – Geometric Trace MSE</a></li>
<li class="chapter" data-level="11.3.4" data-path="multistepLosses.html"><a href="multistepLosses.html#msce-mean-squared-cumulative-error"><i class="fa fa-check"></i><b>11.3.4</b> MSCE – Mean Squared Cumulative Error</a></li>
<li class="chapter" data-level="11.3.5" data-path="multistepLosses.html"><a href="multistepLosses.html#gpl-general-predictive-likelihood"><i class="fa fa-check"></i><b>11.3.5</b> GPL – General Predictive Likelihood</a></li>
<li class="chapter" data-level="11.3.6" data-path="multistepLosses.html"><a href="multistepLosses.html#other-multistep-estimators"><i class="fa fa-check"></i><b>11.3.6</b> Other multistep estimators</a></li>
<li class="chapter" data-level="11.3.7" data-path="multistepLosses.html"><a href="multistepLosses.html#an-example-in-r-2"><i class="fa fa-check"></i><b>11.3.7</b> An example in R</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html"><i class="fa fa-check"></i><b>11.4</b> Initialisation of ADAM</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html#ADAMInitialisationOptAndBack"><i class="fa fa-check"></i><b>11.4.1</b> Optimisation vs backcasting</a></li>
<li class="chapter" data-level="11.4.2" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html#pre-initialisation-of-adam-parameters"><i class="fa fa-check"></i><b>11.4.2</b> Pre-initialisation of ADAM parameters</a></li>
<li class="chapter" data-level="11.4.3" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html#pre-initialisation-of-adam-states-ets"><i class="fa fa-check"></i><b>11.4.3</b> Pre-initialisation of ADAM states, ETS</a></li>
<li class="chapter" data-level="11.4.4" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html#pre-initialisation-of-adam-states-arima"><i class="fa fa-check"></i><b>11.4.4</b> Pre-initialisation of ADAM states, ARIMA</a></li>
<li class="chapter" data-level="11.4.5" data-path="ADAMInitialisation.html"><a href="ADAMInitialisation.html#pre-initialisation-of-adam-states-regressors-and-constant"><i class="fa fa-check"></i><b>11.4.5</b> Pre-initialisation of ADAM states, Regressors and constant</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="multiple-frequencies-in-adam.html"><a href="multiple-frequencies-in-adam.html"><i class="fa fa-check"></i><b>12</b> Multiple frequencies in ADAM</a>
<ul>
<li class="chapter" data-level="12.1" data-path="model-formulation.html"><a href="model-formulation.html"><i class="fa fa-check"></i><b>12.1</b> Model formulation</a></li>
<li class="chapter" data-level="12.2" data-path="ADAMMultiplIssues.html"><a href="ADAMMultiplIssues.html"><i class="fa fa-check"></i><b>12.2</b> Estimation of multiple seasonal model</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="ADAMMultiplIssues.html"><a href="ADAMMultiplIssues.html#adam-ets-issues"><i class="fa fa-check"></i><b>12.2.1</b> ADAM ETS issues</a></li>
<li class="chapter" data-level="12.2.2" data-path="ADAMMultiplIssues.html"><a href="ADAMMultiplIssues.html#adam-arima-issues"><i class="fa fa-check"></i><b>12.2.2</b> ADAM ARIMA issues</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="ETSXMultipleSeasonality.html"><a href="ETSXMultipleSeasonality.html"><i class="fa fa-check"></i><b>12.3</b> Using explanatory variables for multiple seasonalities</a></li>
<li class="chapter" data-level="12.4" data-path="MultipleFrequenciesDSTandLeap.html"><a href="MultipleFrequenciesDSTandLeap.html"><i class="fa fa-check"></i><b>12.4</b> Dealing with daylight saving and leap years</a></li>
<li class="chapter" data-level="12.5" data-path="ADAMMultipleFrequenciesExamples.html"><a href="ADAMMultipleFrequenciesExamples.html"><i class="fa fa-check"></i><b>12.5</b> Examples of application</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="ADAMMultipleFrequenciesExamples.html"><a href="ADAMMultipleFrequenciesExamples.html#adam-ets"><i class="fa fa-check"></i><b>12.5.1</b> ADAM ETS</a></li>
<li class="chapter" data-level="12.5.2" data-path="ADAMMultipleFrequenciesExamples.html"><a href="ADAMMultipleFrequenciesExamples.html#adam-etsx"><i class="fa fa-check"></i><b>12.5.2</b> ADAM ETSX</a></li>
<li class="chapter" data-level="12.5.3" data-path="ADAMMultipleFrequenciesExamples.html"><a href="ADAMMultipleFrequenciesExamples.html#adam-arima"><i class="fa fa-check"></i><b>12.5.3</b> ADAM ARIMA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ADAMIntermittent.html"><a href="ADAMIntermittent.html"><i class="fa fa-check"></i><b>13</b> Intermittent State Space Model</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html"><i class="fa fa-check"></i><b>13.1</b> Occurrence part of the model</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#fixed-probability-model-oets_f"><i class="fa fa-check"></i><b>13.1.1</b> Fixed probability model, oETS<span class="math inline">\(_F\)</span></a></li>
<li class="chapter" data-level="13.1.2" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#oETSO"><i class="fa fa-check"></i><b>13.1.2</b> Odds ratio model, oETS<span class="math inline">\(_O\)</span></a></li>
<li class="chapter" data-level="13.1.3" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#oETSI"><i class="fa fa-check"></i><b>13.1.3</b> Inverse odds ratio model, oETS<span class="math inline">\(_I\)</span></a></li>
<li class="chapter" data-level="13.1.4" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#oETSG"><i class="fa fa-check"></i><b>13.1.4</b> General oETS model, oETS<span class="math inline">\(_G\)</span></a></li>
<li class="chapter" data-level="13.1.5" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#oETSD"><i class="fa fa-check"></i><b>13.1.5</b> Direct probability model, oETS<span class="math inline">\(_D\)</span></a></li>
<li class="chapter" data-level="13.1.6" data-path="ADAMOccurrence.html"><a href="ADAMOccurrence.html#oETSModelSelection"><i class="fa fa-check"></i><b>13.1.6</b> Model selection in oETS</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="ADAMDemandSizes.html"><a href="ADAMDemandSizes.html"><i class="fa fa-check"></i><b>13.2</b> Demand sizes part of the model</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="ADAMDemandSizes.html"><a href="ADAMDemandSizes.html#additive-vs-multiplicative-ets-for-demand-sizes"><i class="fa fa-check"></i><b>13.2.1</b> Additive vs multiplicative ETS for demand sizes</a></li>
<li class="chapter" data-level="13.2.2" data-path="ADAMDemandSizes.html"><a href="ADAMDemandSizes.html#using-arima-for-demand-sizes"><i class="fa fa-check"></i><b>13.2.2</b> Using ARIMA for demand sizes</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="ADAMIntermittentFull.html"><a href="ADAMIntermittentFull.html"><i class="fa fa-check"></i><b>13.3</b> The full ADAM model</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="ADAMIntermittentFull.html"><a href="ADAMIntermittentFull.html#iETSMLE"><i class="fa fa-check"></i><b>13.3.1</b> Maximum Likelihood Estimation</a></li>
<li class="chapter" data-level="13.3.2" data-path="ADAMIntermittentFull.html"><a href="ADAMIntermittentFull.html#conditional-expectation-and-variance"><i class="fa fa-check"></i><b>13.3.2</b> Conditional expectation and variance</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="IntermittentExample.html"><a href="IntermittentExample.html"><i class="fa fa-check"></i><b>13.4</b> Examples of application</a></li>
<li class="chapter" data-level="13.5" data-path="intermittent-demand-challenges.html"><a href="intermittent-demand-challenges.html"><i class="fa fa-check"></i><b>13.5</b> Intermittent demand challenges</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ADAMscaleModel.html"><a href="ADAMscaleModel.html"><i class="fa fa-check"></i><b>14</b> Scale model for ADAM</a>
<ul>
<li class="chapter" data-level="14.1" data-path="model-formulation-1.html"><a href="model-formulation-1.html"><i class="fa fa-check"></i><b>14.1</b> Model formulation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="model-formulation-1.html"><a href="model-formulation-1.html#an-example-with-etsann-with-normal-distribution"><i class="fa fa-check"></i><b>14.1.1</b> An example with ETS(A,N,N) with Normal distribution</a></li>
<li class="chapter" data-level="14.1.2" data-path="model-formulation-1.html"><a href="model-formulation-1.html#general-case"><i class="fa fa-check"></i><b>14.1.2</b> General case</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="diagnostics.html"><a href="diagnostics.html"><i class="fa fa-check"></i><b>15</b> Model diagnostics</a>
<ul>
<li class="chapter" data-level="15.1" data-path="diagnosticsOmitted.html"><a href="diagnosticsOmitted.html"><i class="fa fa-check"></i><b>15.1</b> Model specification: Omitted variables</a></li>
<li class="chapter" data-level="15.2" data-path="diagnosticsRedundant.html"><a href="diagnosticsRedundant.html"><i class="fa fa-check"></i><b>15.2</b> Model specification: Redundant variables</a></li>
<li class="chapter" data-level="15.3" data-path="diagnosticsTransformations.html"><a href="diagnosticsTransformations.html"><i class="fa fa-check"></i><b>15.3</b> Model specification: Transformations</a></li>
<li class="chapter" data-level="15.4" data-path="diagnosticsOutliers.html"><a href="diagnosticsOutliers.html"><i class="fa fa-check"></i><b>15.4</b> Model specification: Outliers</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="diagnosticsOutliers.html"><a href="diagnosticsOutliers.html#outliers-detection"><i class="fa fa-check"></i><b>15.4.1</b> Outliers detection</a></li>
<li class="chapter" data-level="15.4.2" data-path="diagnosticsOutliers.html"><a href="diagnosticsOutliers.html#dealing-with-outliers"><i class="fa fa-check"></i><b>15.4.2</b> Dealing with outliers</a></li>
<li class="chapter" data-level="15.4.3" data-path="diagnosticsOutliers.html"><a href="diagnosticsOutliers.html#an-automatic-mechanism"><i class="fa fa-check"></i><b>15.4.3</b> An automatic mechanism</a></li>
<li class="chapter" data-level="15.4.4" data-path="diagnosticsOutliers.html"><a href="diagnosticsOutliers.html#final-remarks"><i class="fa fa-check"></i><b>15.4.4</b> Final remarks</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="diagnosticsResidualsIIDAuto.html"><a href="diagnosticsResidualsIIDAuto.html"><i class="fa fa-check"></i><b>15.5</b> Residuals are i.i.d.: autocorrelation</a></li>
<li class="chapter" data-level="15.6" data-path="diagnosticsResidualsIIDHetero.html"><a href="diagnosticsResidualsIIDHetero.html"><i class="fa fa-check"></i><b>15.6</b> Residuals are i.i.d.: heteroscedasticity</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="diagnosticsResidualsIIDHetero.html"><a href="diagnosticsResidualsIIDHetero.html#detecting-heteroscedasticity"><i class="fa fa-check"></i><b>15.6.1</b> Detecting heteroscedasticity</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="diagnosticsResidualsIIDExpectation.html"><a href="diagnosticsResidualsIIDExpectation.html"><i class="fa fa-check"></i><b>15.7</b> Residuals are i.i.d.: zero expectation</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="diagnosticsResidualsIIDExpectation.html"><a href="diagnosticsResidualsIIDExpectation.html#diagnosticsResidualsIIDExpectationMultiple"><i class="fa fa-check"></i><b>15.7.1</b> Multistep forecast errors have zero mean</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="diagnosticsResidualsIIDDistribution.html"><a href="diagnosticsResidualsIIDDistribution.html"><i class="fa fa-check"></i><b>15.8</b> Residuals are i.i.d.: distributional assumptions</a></li>
<li class="chapter" data-level="15.9" data-path="diagnosticsMulticollinearity.html"><a href="diagnosticsMulticollinearity.html"><i class="fa fa-check"></i><b>15.9</b> Multicollinearity</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ADAMSelection.html"><a href="ADAMSelection.html"><i class="fa fa-check"></i><b>16</b> Model selection and combinations in ADAM</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ETSSelection.html"><a href="ETSSelection.html"><i class="fa fa-check"></i><b>16.1</b> ADAM ETS components selection</a></li>
<li class="chapter" data-level="16.2" data-path="ARIMASelection.html"><a href="ARIMASelection.html"><i class="fa fa-check"></i><b>16.2</b> ADAM ARIMA order selection</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="ARIMASelection.html"><a href="ARIMASelection.html#ets-arima-restrictions"><i class="fa fa-check"></i><b>16.2.1</b> ETS + ARIMA restrictions</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="ETSXSelection.html"><a href="ETSXSelection.html"><i class="fa fa-check"></i><b>16.3</b> Explanatory variables selection</a></li>
<li class="chapter" data-level="16.4" data-path="ADAMCombinations.html"><a href="ADAMCombinations.html"><i class="fa fa-check"></i><b>16.4</b> Forecasts combinations in ADAM</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="ADAMCombinations.html"><a href="ADAMCombinations.html#other-combination-approaches"><i class="fa fa-check"></i><b>16.4.1</b> Other combination approaches</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="ADAMUncertainty.html"><a href="ADAMUncertainty.html"><i class="fa fa-check"></i><b>17</b> Handling uncertainty in ADAM</a>
<ul>
<li class="chapter" data-level="17.1" data-path="ADAMUncertaintyVCOV.html"><a href="ADAMUncertaintyVCOV.html"><i class="fa fa-check"></i><b>17.1</b> Covariance matrix of parameters</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="ADAMUncertaintyVCOV.html"><a href="ADAMUncertaintyVCOV.html#bootstrapped-covariance-matrix"><i class="fa fa-check"></i><b>17.1.1</b> Bootstrapped covariance matrix</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="confidence-intervals-for-parameters.html"><a href="confidence-intervals-for-parameters.html"><i class="fa fa-check"></i><b>17.2</b> Confidence intervals for parameters</a></li>
<li class="chapter" data-level="17.3" data-path="conditionalVarianceUncertainty.html"><a href="conditionalVarianceUncertainty.html"><i class="fa fa-check"></i><b>17.3</b> Conditional variance with uncertain parameters</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="conditionalVarianceUncertainty.html"><a href="conditionalVarianceUncertainty.html#estimated-initial-state"><i class="fa fa-check"></i><b>17.3.1</b> Estimated initial state</a></li>
<li class="chapter" data-level="17.3.2" data-path="conditionalVarianceUncertainty.html"><a href="conditionalVarianceUncertainty.html#estimated-parameters-of-adam-model"><i class="fa fa-check"></i><b>17.3.2</b> Estimated parameters of ADAM model</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="adamRefitted.html"><a href="adamRefitted.html"><i class="fa fa-check"></i><b>17.4</b> Multi-scenarios for ADAM states</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="ADAMForecasting.html"><a href="ADAMForecasting.html"><i class="fa fa-check"></i><b>18</b> Forecasting with ADAM</a>
<ul>
<li class="chapter" data-level="18.1" data-path="ADAMForecastingExpectation.html"><a href="ADAMForecastingExpectation.html"><i class="fa fa-check"></i><b>18.1</b> Conditional expectation</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="ADAMForecastingExpectation.html"><a href="ADAMForecastingExpectation.html#ADAMForecastingExpectationSimulations"><i class="fa fa-check"></i><b>18.1.1</b> Simulating demand trajectories</a></li>
<li class="chapter" data-level="18.1.2" data-path="ADAMForecastingExpectation.html"><a href="ADAMForecastingExpectation.html#explanatory-variables"><i class="fa fa-check"></i><b>18.1.2</b> Explanatory variables</a></li>
<li class="chapter" data-level="18.1.3" data-path="ADAMForecastingExpectation.html"><a href="ADAMForecastingExpectation.html#demonstration-in-r"><i class="fa fa-check"></i><b>18.1.3</b> Demonstration in R</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html"><i class="fa fa-check"></i><b>18.2</b> Prediction intervals</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#approximate-intervals"><i class="fa fa-check"></i><b>18.2.1</b> Approximate intervals</a></li>
<li class="chapter" data-level="18.2.2" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#ADAMForecastingPISimulations"><i class="fa fa-check"></i><b>18.2.2</b> Simulated intervals</a></li>
<li class="chapter" data-level="18.2.3" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#semiparametric-intervals"><i class="fa fa-check"></i><b>18.2.3</b> Semiparametric intervals</a></li>
<li class="chapter" data-level="18.2.4" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#nonparametric-intervals"><i class="fa fa-check"></i><b>18.2.4</b> Nonparametric intervals</a></li>
<li class="chapter" data-level="18.2.5" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#ADAMForecastingPIEmpirical"><i class="fa fa-check"></i><b>18.2.5</b> Empirical intervals</a></li>
<li class="chapter" data-level="18.2.6" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#complete-parametric-intervals"><i class="fa fa-check"></i><b>18.2.6</b> Complete parametric intervals</a></li>
<li class="chapter" data-level="18.2.7" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#explanatory-variables-1"><i class="fa fa-check"></i><b>18.2.7</b> Explanatory variables</a></li>
<li class="chapter" data-level="18.2.8" data-path="ADAMForecastingPI.html"><a href="ADAMForecastingPI.html#ADAMForecastingPIExample"><i class="fa fa-check"></i><b>18.2.8</b> Example in R</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html"><i class="fa fa-check"></i><b>18.3</b> Other aspects of forecast uncertainty</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html#constructing-intervals-for-intermittent-demand-model"><i class="fa fa-check"></i><b>18.3.1</b> Constructing intervals for intermittent demand model</a></li>
<li class="chapter" data-level="18.3.2" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html#forecastingADAMOtherOneSided"><i class="fa fa-check"></i><b>18.3.2</b> One-sided prediction interval</a></li>
<li class="chapter" data-level="18.3.3" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html#forecastingADAMOtherCumulative"><i class="fa fa-check"></i><b>18.3.3</b> Cumulative over the horizon forecast</a></li>
<li class="chapter" data-level="18.3.4" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html#forecastingADAMOtherExample"><i class="fa fa-check"></i><b>18.3.4</b> Example in R</a></li>
<li class="chapter" data-level="18.3.5" data-path="forecastingADAMOther.html"><a href="forecastingADAMOther.html#confidence-interval"><i class="fa fa-check"></i><b>18.3.5</b> Confidence interval</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>19</b> What’s next?</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forecasting and Analytics with ADAM</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ADAMCombinations" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Forecasts combinations in ADAM</h2>
<p>When it comes to achieving as accurate forecasts as possible in practice, the best and the most robust (in terms of not failing) approach is producing combined forecasts. The primary motivation for combining is that there is no one best forecasting method for everything – methods might perform very well in some conditions and fail in others. It is typically not possible to say which of the cases you face in practice. Furthermore, the model selected on one sample might differ from the model chosen for the same sample but with one more observation. Thus there is a model uncertainty <span class="citation">(as defined by <a href="#ref-Chatfield1996" role="doc-biblioref">Chatfield, 1996</a>)</span>, and the safer option is to produce forecasts from several models and then combine them to get the final forecast. This way, the potential damage from an inaccurate forecast hopefully will be reduced.</p>
<p>There are many different techniques for combining forecasts. The non-exhaustive list includes:</p>
<ol style="list-style-type: decimal">
<li><strong>Simple average</strong>, which works fine as long as you do not have exceptionally poorly performing methods;</li>
<li><strong>Median</strong>, which produces good combinations when the pool of models is relatively small and might contain those that produce very different forecasts from the others (e.g. explosive trajectories). However, when a big pool of models is considered, the median might ignore vital information and decrease accuracy, as noted by <span class="citation"><a href="#ref-Jose2008" role="doc-biblioref">Jose and Winkler</a> (<a href="#ref-Jose2008" role="doc-biblioref">2008</a>)</span>. <span class="citation"><a href="#ref-Stock2004" role="doc-biblioref">Stock and Watson</a> (<a href="#ref-Stock2004" role="doc-biblioref">2004</a>)</span> conducted an experiment on macroeconomic data, and medians performed poorer than the other approaches (probably because of the high number of forecasting methods), while median-based combination worked well for <span class="citation"><a href="#ref-Petropoulos2020" role="doc-biblioref">Petropoulos and Svetunkov</a> (<a href="#ref-Petropoulos2020" role="doc-biblioref">2020</a>)</span>, who considered only four forecasting approaches;</li>
<li><strong>Trimmed and/or Winsorized mean</strong>, which drop extreme forecasts, when calculating the mean and, as was shown by <span class="citation"><a href="#ref-Jose2008" role="doc-biblioref">Jose and Winkler</a> (<a href="#ref-Jose2008" role="doc-biblioref">2008</a>)</span>, work well in case of big pools of models, outperforming medians and simple average;</li>
<li><strong>Weighted mean</strong>, which assigns weights to each forecast and produces a combined forecast based on them. While this approach sounds more reasonable than the others, there is no guarantee that it will work better because the weights need to be estimated and might change with the sample size change or a pool of models. <span class="citation"><a href="#ref-Claeskens2016" role="doc-biblioref">Claeskens et al.</a> (<a href="#ref-Claeskens2016" role="doc-biblioref">2016</a>)</span> explain why the simple average approach outperforms weighted averages in many cases: it does not require estimation of weights and thus does not introduce as much uncertainty. However, when done smartly, combinations can be beneficial in terms of accuracy, as shown, for example, in <span class="citation"><a href="#ref-Kolassa2011" role="doc-biblioref">Kolassa</a> (<a href="#ref-Kolassa2011" role="doc-biblioref">2011</a>)</span> and <span class="citation"><a href="#ref-Kourentzes2019c" role="doc-biblioref">Kourentzes et al.</a> (<a href="#ref-Kourentzes2019c" role="doc-biblioref">2019a</a>)</span>.</li>
</ol>
<p>The forecast combination approach implemented in ADAM is the weighted mean, based on <span class="citation"><a href="#ref-Kolassa2011" role="doc-biblioref">Kolassa</a> (<a href="#ref-Kolassa2011" role="doc-biblioref">2011</a>)</span>, who used AIC weights as proposed by <span class="citation"><a href="#ref-Burnham2004" role="doc-biblioref">Burnham and Anderson</a> (<a href="#ref-Burnham2004" role="doc-biblioref">2004</a>)</span>. This approach aims to estimate all models in the pool, calculate information criteria (IC) for each of them <span class="citation">(see discussion in Section 13.4 in <a href="#ref-SvetunkovSBA" role="doc-biblioref">Svetunkov, 2021</a>)</span> and then calculate weights for each model. Those models with lower ICs will have higher weights, while the poorly performing ones will have higher ones. The only requirement of the approach is for the parameters of models to be estimated via likelihood maximisation (see Section <a href="ADAMETSEstimationLikelihood.html#ADAMETSEstimationLikelihood">11.1</a>). It is not important what model is used or what distribution is assumed, as long as the models are initialised (see discussion in Section <a href="ADAMInitialisation.html#ADAMInitialisation">11.4</a>) and constructed in the same way and the likelihood is used in the estimation.</p>
<p>When it comes to prediction intervals, the correct way of calculating them for the combination is to consider the joint distribution of all forecasting models in the pool and take quantiles based on that. However, <span class="citation"><a href="#ref-Lichtendahl2013" role="doc-biblioref">Lichtendahl et al.</a> (<a href="#ref-Lichtendahl2013" role="doc-biblioref">2013</a>)</span> showed that a simpler approach of averaging the quantiles works well in practice. This approach implies producing prediction intervals for all the models in the pool and then averaging the obtained values. It is fast and efficient in terms of getting well-calibrated intervals.</p>
<p>In R, <code>adam()</code> function supports the combination of ETS models via <code>model="CCC"</code> or any other combination of letters, as long as the model contains “C” in its name. For example, the function will combine all non-seasonal models if <code>model="CCN"</code> is provided. Consider the following example on Box-Jenkins sales series:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="ADAMCombinations.html#cb315-1" aria-hidden="true" tabindex="-1"></a>adamETSCCN <span class="ot">&lt;-</span> <span class="fu">adam</span>(BJsales, <span class="st">&quot;CCN&quot;</span>, <span class="at">h=</span><span class="dv">10</span>, <span class="at">holdout=</span><span class="cn">TRUE</span>, <span class="at">ic=</span><span class="st">&quot;AICc&quot;</span>)</span></code></pre></div>
<p>In the code above, the function will estimate all non-seasonal models, extract AICc for each of them and then calculate weights, which we can extract for further analysis:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="ADAMCombinations.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(adamETSCCN<span class="sc">$</span>ICw,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   ANN   MAN  AAdN   MMN  AMdN   MNN   AAN  MAdN   AMN  MMdN 
## 0.000 0.014 0.252 0.010 0.511 0.000 0.073 0.031 0.050 0.059</code></pre>
<p>As can be seen from the output of weights, the level models ETS(A,N,N) and ETS(M,N,N) were further away from the best model and, as a result, got weights very close to zero.</p>
<p>The fitted values are combined from all models, the residuals are equal to <span class="math inline">\(e_t = y_t -\hat{y}_t\)</span>, where <span class="math inline">\(\hat{y}_t\)</span> is the combined value. The final forecast together with the prediction interval can be generated via the <code>forecast()</code> function (Figure <a href="ADAMCombinations.html#fig:adamETSCCN">16.2</a>):</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="ADAMCombinations.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">forecast</span>(adamETSCCN,<span class="at">h=</span><span class="dv">10</span>,<span class="at">interval=</span><span class="st">&quot;prediction&quot;</span>))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:adamETSCCN"></span>
<img src="Svetunkov--2022----ADAM_files/figure-html/adamETSCCN-1.png" alt="An example of combination of ETS non-seasonal models on Box-Jenkins sale time series." width="672" />
<p class="caption">
Figure 16.2: An example of combination of ETS non-seasonal models on Box-Jenkins sale time series.
</p>
</div>
<p>What the function does, in this case, is produces forecasts and prediction intervals from each model and then uses original weights to combine them. Each model can be extracted and used separately if needed. Here is an example with ETS(A,Ad,N) model from the estimated pool:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="ADAMCombinations.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">forecast</span>(adamETSCCN<span class="sc">$</span>models<span class="sc">$</span>AAdN,<span class="at">h=</span><span class="dv">10</span>,<span class="at">interval=</span><span class="st">&quot;prediction&quot;</span>))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:adamETSCCNAAdN"></span>
<img src="Svetunkov--2022----ADAM_files/figure-html/adamETSCCNAAdN-1.png" alt="An example of the combination of ETS non-seasonal models on Box-Jenkins sale time series." width="672" />
<p class="caption">
Figure 16.3: An example of the combination of ETS non-seasonal models on Box-Jenkins sale time series.
</p>
</div>
<p>As can be seen from the plots in Figures <a href="ADAMCombinations.html#fig:adamETSCCN">16.2</a> and <a href="ADAMCombinations.html#fig:adamETSCCNAAdN">16.3</a>, due to the highest weight, ETS(A,Ad,N) and ETS(C,C,N) models have produced very similar point forecasts and prediction intervals.</p>
<p>Alternatively, if we do not need to consider all ETS models, we can provide the pool of models, including a model with “C” in its name. Here is an example of how pure additive non seasonal models can be combined:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="ADAMCombinations.html#cb320-1" aria-hidden="true" tabindex="-1"></a>adamETSCCNPureAdditive <span class="ot">&lt;-</span> <span class="fu">adam</span>(BJsales, </span>
<span id="cb320-2"><a href="ADAMCombinations.html#cb320-2" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">c</span>(<span class="st">&quot;CCN&quot;</span>,<span class="st">&quot;ANN&quot;</span>,<span class="st">&quot;AAN&quot;</span>,<span class="st">&quot;AAdN&quot;</span>), </span>
<span id="cb320-3"><a href="ADAMCombinations.html#cb320-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">h=</span><span class="dv">10</span>, <span class="at">holdout=</span><span class="cn">TRUE</span>,</span>
<span id="cb320-4"><a href="ADAMCombinations.html#cb320-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ic=</span><span class="st">&quot;AICc&quot;</span>)</span></code></pre></div>
<p>The main issue with the combined ETS approach is that it is computationally expensive due to the estimation of all models in the pool and can also result in high memory usage. As a result, it is recommended to be smart in deciding which models to include in the pool.</p>
<div id="other-combination-approaches" class="section level3" number="16.4.1">
<h3><span class="header-section-number">16.4.1</span> Other combination approaches</h3>
<p>While <code>adam()</code> supports IC weights combination of ETS models only, it is also possible to combine ARIMA, regression models and models with different distributions in the framework. Given that all models are initialised in the same way and that the likelihoods are calculated using similar principles, the weights can be calculated manually using the formula from <span class="citation"><a href="#ref-Burnham2004" role="doc-biblioref">Burnham and Anderson</a> (<a href="#ref-Burnham2004" role="doc-biblioref">2004</a>)</span>:
<span class="math display" id="eq:ETSADAMStateSpaceEstimated">\[\begin{equation}
    w_i = \frac{\exp\left(-\frac{1}{2}\Delta_i\right)}{\sum_{j=1}^n \exp\left(-\frac{1}{2}\Delta_j\right)},
  \tag{16.1}
\end{equation}\]</span>
where <span class="math inline">\(\Delta_i=\mathrm{IC}_i -\min_{i=1}^n \left(\mathrm{IC}_i\right)\)</span> is the information criteria distance from the best performing model, <span class="math inline">\(\mathrm{IC}_i\)</span> is the value of information criterion of model <span class="math inline">\(i\)</span> and <span class="math inline">\(n\)</span> is the number of models in the pool. For example, here how we can combine the best ETS with the best ARIMA and the ETSX(M,M,N) model in the ADAM framework, based on BICc:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="ADAMCombinations.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data with explanatory variables</span></span>
<span id="cb321-2"><a href="ADAMCombinations.html#cb321-2" aria-hidden="true" tabindex="-1"></a>BJsalesData <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">as.data.frame</span>(BJsales),</span>
<span id="cb321-3"><a href="ADAMCombinations.html#cb321-3" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">xregExpander</span>(BJsales.lead,<span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">5</span>)))</span>
<span id="cb321-4"><a href="ADAMCombinations.html#cb321-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-5"><a href="ADAMCombinations.html#cb321-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply models</span></span>
<span id="cb321-6"><a href="ADAMCombinations.html#cb321-6" aria-hidden="true" tabindex="-1"></a>adamModelsPool <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>,<span class="dv">3</span>)</span>
<span id="cb321-7"><a href="ADAMCombinations.html#cb321-7" aria-hidden="true" tabindex="-1"></a>adamModelsPool[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">adam</span>(BJsales, <span class="st">&quot;ZZN&quot;</span>,</span>
<span id="cb321-8"><a href="ADAMCombinations.html#cb321-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">h=</span><span class="dv">10</span>, <span class="at">holdout=</span><span class="cn">TRUE</span>,</span>
<span id="cb321-9"><a href="ADAMCombinations.html#cb321-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">ic=</span><span class="st">&quot;BICc&quot;</span>)</span>
<span id="cb321-10"><a href="ADAMCombinations.html#cb321-10" aria-hidden="true" tabindex="-1"></a>adamModelsPool[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">adam</span>(BJsales, <span class="st">&quot;NNN&quot;</span>,</span>
<span id="cb321-11"><a href="ADAMCombinations.html#cb321-11" aria-hidden="true" tabindex="-1"></a>                            <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="dv">3</span>,<span class="at">i=</span><span class="dv">2</span>,<span class="at">ma=</span><span class="dv">3</span>,<span class="at">select=</span><span class="cn">TRUE</span>),</span>
<span id="cb321-12"><a href="ADAMCombinations.html#cb321-12" aria-hidden="true" tabindex="-1"></a>                            <span class="at">h=</span><span class="dv">10</span>, <span class="at">holdout=</span><span class="cn">TRUE</span>,</span>
<span id="cb321-13"><a href="ADAMCombinations.html#cb321-13" aria-hidden="true" tabindex="-1"></a>                            <span class="at">ic=</span><span class="st">&quot;BICc&quot;</span>)</span>
<span id="cb321-14"><a href="ADAMCombinations.html#cb321-14" aria-hidden="true" tabindex="-1"></a>adamModelsPool[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> <span class="fu">adam</span>(BJsalesData, <span class="st">&quot;MMN&quot;</span>,</span>
<span id="cb321-15"><a href="ADAMCombinations.html#cb321-15" aria-hidden="true" tabindex="-1"></a>                            <span class="at">h=</span><span class="dv">10</span>, <span class="at">holdout=</span><span class="cn">TRUE</span>,</span>
<span id="cb321-16"><a href="ADAMCombinations.html#cb321-16" aria-hidden="true" tabindex="-1"></a>                            <span class="at">ic=</span><span class="st">&quot;BICc&quot;</span>,</span>
<span id="cb321-17"><a href="ADAMCombinations.html#cb321-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">regressors=</span><span class="st">&quot;select&quot;</span>)</span>
<span id="cb321-18"><a href="ADAMCombinations.html#cb321-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-19"><a href="ADAMCombinations.html#cb321-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract BICc values</span></span>
<span id="cb321-20"><a href="ADAMCombinations.html#cb321-20" aria-hidden="true" tabindex="-1"></a>adamModelsICs <span class="ot">&lt;-</span> <span class="fu">sapply</span>(adamModelsPool,BICc)</span>
<span id="cb321-21"><a href="ADAMCombinations.html#cb321-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-22"><a href="ADAMCombinations.html#cb321-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate weights</span></span>
<span id="cb321-23"><a href="ADAMCombinations.html#cb321-23" aria-hidden="true" tabindex="-1"></a>adamModelsICWeights <span class="ot">&lt;-</span> adamModelsICs <span class="sc">-</span> <span class="fu">min</span>(adamModelsICs)</span>
<span id="cb321-24"><a href="ADAMCombinations.html#cb321-24" aria-hidden="true" tabindex="-1"></a>adamModelsICWeights[] <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.5</span><span class="sc">*</span>adamModelsICWeights) <span class="sc">/</span></span>
<span id="cb321-25"><a href="ADAMCombinations.html#cb321-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(<span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.5</span><span class="sc">*</span>adamModelsICWeights))</span>
<span id="cb321-26"><a href="ADAMCombinations.html#cb321-26" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(adamModelsICWeights) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ETS&quot;</span>,<span class="st">&quot;ARIMA&quot;</span>,<span class="st">&quot;ETSX&quot;</span>)</span>
<span id="cb321-27"><a href="ADAMCombinations.html#cb321-27" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(adamModelsICWeights,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   ETS ARIMA  ETSX 
## 0.524 0.424 0.052</code></pre>
<p>These weights can then be used for the combination of the fitted values, forecasts and prediction intervals:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="ADAMCombinations.html#cb323-1" aria-hidden="true" tabindex="-1"></a>adamModelsPoolForecasts <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>,<span class="dv">3</span>)</span>
<span id="cb323-2"><a href="ADAMCombinations.html#cb323-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce forecasts from the three models</span></span>
<span id="cb323-3"><a href="ADAMCombinations.html#cb323-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>){</span>
<span id="cb323-4"><a href="ADAMCombinations.html#cb323-4" aria-hidden="true" tabindex="-1"></a>    adamModelsPoolForecasts[[i]] <span class="ot">&lt;-</span> <span class="fu">forecast</span>(adamModelsPool[[i]],</span>
<span id="cb323-5"><a href="ADAMCombinations.html#cb323-5" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">h=</span><span class="dv">10</span>, <span class="at">interval=</span><span class="st">&quot;pred&quot;</span>)</span>
<span id="cb323-6"><a href="ADAMCombinations.html#cb323-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb323-7"><a href="ADAMCombinations.html#cb323-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce combined conditional means and prediction intervals</span></span>
<span id="cb323-8"><a href="ADAMCombinations.html#cb323-8" aria-hidden="true" tabindex="-1"></a>finalForecast <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">sapply</span>(adamModelsPoolForecasts,</span>
<span id="cb323-9"><a href="ADAMCombinations.html#cb323-9" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;[[&quot;</span>,<span class="st">&quot;mean&quot;</span>) <span class="sc">%*%</span> adamModelsICWeights,</span>
<span id="cb323-10"><a href="ADAMCombinations.html#cb323-10" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">sapply</span>(adamModelsPoolForecasts,</span>
<span id="cb323-11"><a href="ADAMCombinations.html#cb323-11" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;[[&quot;</span>,<span class="st">&quot;lower&quot;</span>) <span class="sc">%*%</span> adamModelsICWeights,</span>
<span id="cb323-12"><a href="ADAMCombinations.html#cb323-12" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">sapply</span>(adamModelsPoolForecasts,</span>
<span id="cb323-13"><a href="ADAMCombinations.html#cb323-13" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;[[&quot;</span>,<span class="st">&quot;upper&quot;</span>) <span class="sc">%*%</span> adamModelsICWeights)</span>
<span id="cb323-14"><a href="ADAMCombinations.html#cb323-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Give the appropriate names</span></span>
<span id="cb323-15"><a href="ADAMCombinations.html#cb323-15" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(finalForecast) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Mean&quot;</span>, <span class="st">&quot;Lower bound (2.5%)&quot;</span>,</span>
<span id="cb323-16"><a href="ADAMCombinations.html#cb323-16" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Upper bound (97.5%)&quot;</span>)</span>
<span id="cb323-17"><a href="ADAMCombinations.html#cb323-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the table in the ts format (for convenience)</span></span>
<span id="cb323-18"><a href="ADAMCombinations.html#cb323-18" aria-hidden="true" tabindex="-1"></a>finalForecast <span class="ot">&lt;-</span> <span class="fu">ts</span>(finalForecast,</span>
<span id="cb323-19"><a href="ADAMCombinations.html#cb323-19" aria-hidden="true" tabindex="-1"></a>                    <span class="at">start=</span><span class="fu">start</span>(adamModelsPoolForecasts[[i]]<span class="sc">$</span>mean))</span>
<span id="cb323-20"><a href="ADAMCombinations.html#cb323-20" aria-hidden="true" tabindex="-1"></a>finalForecast</span></code></pre></div>
<pre><code>## Time Series:
## Start = 141 
## End = 150 
## Frequency = 1 
##         Mean Lower bound (2.5%) Upper bound (97.5%)
## 141 257.6571           254.8790            260.4582
## 142 257.7166           253.3549            262.1749
## 143 257.7761           251.8051            263.7821
## 144 257.8257           250.3065            265.3012
## 145 257.8705           248.8259            266.9647
## 146 257.9107           247.2611            268.6027
## 147 257.9642           245.6853            270.3331
## 148 258.0011           244.0017            272.1206
## 149 258.0357           242.2442            273.7943
## 150 258.0739           240.5972            275.5410</code></pre>
<p>In order to see how the forecast looks like, we can plot it via <code>graphmaker()</code> function from <code>greybox</code>:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="ADAMCombinations.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">graphmaker</span>(BJsales, finalForecast[,<span class="dv">1</span>],</span>
<span id="cb325-2"><a href="ADAMCombinations.html#cb325-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">lower=</span>finalForecast[,<span class="dv">2</span>], <span class="at">upper=</span>finalForecast[,<span class="dv">3</span>],</span>
<span id="cb325-3"><a href="ADAMCombinations.html#cb325-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">level=</span><span class="fl">0.95</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:adamCombinedfinalForecast"></span>
<img src="Svetunkov--2022----ADAM_files/figure-html/adamCombinedfinalForecast-1.png" alt="Final forecast from the combination of ETS, ARIMA and ETSX models." width="672" />
<p class="caption">
Figure 16.4: Final forecast from the combination of ETS, ARIMA and ETSX models.
</p>
</div>
<p>Figure <a href="ADAMCombinations.html#fig:adamCombinedfinalForecast">16.4</a> demonstrates the slightly increasing trajectory with expanding prediction interval. The point forecast (conditional mean) corresponds to the trajectory observed on the last several observations, just before the forecast origin. The future values are inside the prediction interval, so overall, this can be considered as a reasonable forecast.</p>
<!-- ## Pooling -->
<!-- ## Rolling origin selection {#ROSelection} -->

</div>
</div>
<!-- </div> -->
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Burnham2004" class="csl-entry">
• Burnham, K.P., Anderson, D.R., 2004. <span class="nocase">Model Selection and Multimodel Inference</span>. Springer New York. <a href="https://doi.org/10.1007/b97636">https://doi.org/10.1007/b97636</a>
</div>
<div id="ref-Chatfield1996" class="csl-entry">
• Chatfield, C., 1996. <span class="nocase">Model uncertainty and forecast accuracy</span>. Journal of Forecasting. 15, 495–508. <a href="https://doi.org/10.1002/(SICI)1099-131X(199612)15:7&lt;495::AID-FOR640&gt;3.3.CO;2-F">https://doi.org/10.1002/(SICI)1099-131X(199612)15:7&lt;495::AID-FOR640&gt;3.3.CO;2-F</a>
</div>
<div id="ref-Claeskens2016" class="csl-entry">
• Claeskens, G., Magnus, J.R., Vasnev, A.L., Wang, W., 2016. <span class="nocase">The forecast combination puzzle: A simple theoretical explanation</span>. International Journal of Forecasting. 32, 754–762. <a href="https://doi.org/10.1016/j.ijforecast.2015.12.005">https://doi.org/10.1016/j.ijforecast.2015.12.005</a>
</div>
<div id="ref-Jose2008" class="csl-entry">
• Jose, V.R.R., Winkler, R.L., 2008. <span class="nocase">Simple robust averages of forecasts: Some empirical results</span>. International Journal of Forecasting. 24, 163–169. <a href="https://doi.org/10.1016/j.ijforecast.2007.06.001">https://doi.org/10.1016/j.ijforecast.2007.06.001</a>
</div>
<div id="ref-Kolassa2011" class="csl-entry">
• Kolassa, S., 2011. <span class="nocase">Combining exponential smoothing forecasts using Akaike weights</span>. International Journal of Forecasting. 27, 238–251. <a href="https://doi.org/10.1016/j.ijforecast.2010.04.006">https://doi.org/10.1016/j.ijforecast.2010.04.006</a>
</div>
<div id="ref-Kourentzes2019c" class="csl-entry">
• Kourentzes, N., Barrow, D., Petropoulos, F., 2019a. <span class="nocase">Another look at forecast selection and combination: Evidence from forecast pooling</span>. International Journal of Production Economics. 209, 226–235. <a href="https://doi.org/10.1016/j.ijpe.2018.05.019">https://doi.org/10.1016/j.ijpe.2018.05.019</a>
</div>
<div id="ref-Lichtendahl2013" class="csl-entry">
• Lichtendahl, K.C., Grushka-Cockayne, Y., Winkler, R.L., 2013. <span class="nocase">Is It Better to Average Probabilities or Quantiles?</span> Management Science. 59, 1594–1611. <a href="https://doi.org/10.1287/mnsc.1120.1667">https://doi.org/10.1287/mnsc.1120.1667</a>
</div>
<div id="ref-Petropoulos2020" class="csl-entry">
• Petropoulos, F., Svetunkov, I., 2020. <span class="nocase">A simple combination of univariate models</span>. International Journal of Forecasting. 36, 110–115. <a href="https://doi.org/10.1016/j.ijforecast.2019.01.006">https://doi.org/10.1016/j.ijforecast.2019.01.006</a>
</div>
<div id="ref-Stock2004" class="csl-entry">
• Stock, J.H., Watson, M.W., 2004. <span class="nocase">Combination forecasts of output growth in a seven-country data set</span>. Journal of Forecasting. 23, 405–430. <a href="https://doi.org/10.1002/for.928">https://doi.org/10.1002/for.928</a>
</div>
<div id="ref-SvetunkovSBA" class="csl-entry">
• Svetunkov, I., 2021. Statistics for business analytics. <a href="https://openforecast.org/sba/">https://openforecast.org/sba/</a> (version: 01.10.2021)
</div>
</div>

            </section>

          </div>
        </div>
      </div>
<a href="ETSXSelection.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ADAMUncertainty.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/config-i1/adam/tree/master/Chapters//16-ADAM-Selection.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Svetunkov (2022) - ADAM.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
