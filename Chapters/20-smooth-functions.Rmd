# Forecasting functions of the smooth package
While ADAM is the main focus of this monograph, there are several functions in the `smooth` package that implement some special cases of it or some related models. In fact, all the models implemented in the `smooth` package are formulated in one and the same SSOE framework, discussed in this monograph. In this chapter, I briefly explain how the specific functions of the package are related to ADAM and how they are formulated. I conclude the chapter with `adam()` cheat sheet, listing the main commands that can be used to apply the model to a data in variety of scenarios.

## Exponential Smoothing, es()
The `es()` function from the `smooth` package implements the conventional ETS model with some modifications. The fundamental difference of the function from the `ets()` from the `forecast` package is that it is implemented in the SSOE framework discussed in Section \@ref(ADAMETSGeneral), i.e. with lagged values of the state vector and a smaller transition matrix. In fact, starting from the `smooth` v3.2.0, it is just a wrapper of the `adam()` function, restricting it to:

- the single seasonal ETS (multiple seasonal cycles are supported by `adam()`, as discussed in Chapter \@ref(ADAMMultipleFrequencies)),
- the Normal distribution for the $\epsilon_t$ (Sections \@ref(ADAMETSAdditiveDistributions) and \@ref(ADAMETSMultiplicativeDistributions)),
- demand sizes only (no support for the occurrence model from Chapter \@ref(ADAMIntermittent)),
- ETS and regression (no ARIMA elements as in Chapter \@ref(ADAMARIMA)),
- location model only (no scale model from Chapter \@ref(ADAMscaleModel)).

Still, the function supports the main features of ETS and introduces those that are not available in either `ets()` from the `forecast` package or `ETS()` from the `fable`:

1. Explanatory variables in the ETSX model from Chapter \@ref(ADAMX);
2. A variety of loss functions, including the custom one, as discussed in Chapter \@ref(ADAMETSEstimation);
3. Different initialisation methods (see Section \@ref(ADAMInitialisation));
3. Diagnostics plots from Chapter \@ref(diagnostics);
4. Components and explanatory variables selection and combinations via approaches discussed in Chapter \@ref(ADAMSelection);
5. Covariance matrix of parameters and related methods for reapplication of ETS model (\@ref(ADAMUncertainty));
6. Data simulation as in Section \@ref(ADAMUncertaintySimulation);
7. All types of prediction intervals and other related aspects discussed in Chapter \@ref(ADAMForecasting).

Being a wrapper of the `adam()`, `es()` is agnostic of the input data, working with any object, including `ts`, `zoo`, `tibble` etc as long as the provided object has only one column. The seasonal lag can be regulated in the function using the `lags` variable, the same way it is done in `adam()`. The explanatory variables in `es()` are provided in a form of a matrix in the variable `xreg` (similarly to how it is done in `arima()` from the `stats` package).


## Complex Exponential Smoothing, ces()


## State Space ARIMA, ssarima()

## Multiple Seasonal ARIMA, msarima()

## adam() cheat sheet for R {#cheatSheet}
This Chapter summarises the main ways of using `adam()` in R with references to the chapters and sections, where specific elements were discussed.

Estimate the best ETS model for the provided data (Section \@ref(ETSSelection)):
```{r eval=FALSE}
ourModel <- adam(y)
```

The best ETS, taking the last 10 observations of time series as a holdout to test the performance of model:
```{r eval=FALSE}
ourModel <- adam(y, h=10, holdout=TRUE)
```

Build a pure multiplicative seasonal ETS with an arbitrary seasonal lag of 7 (can be applied to an object `y` of any class, including `ts`, `vector`, `matrix`, `zoo`, `tibble` etc):
```{r eval=FALSE}
ourModel <- adam(y, model="YYM", lags=7)
```

Estimate the best ARIMA model for the provided data (assuming seasonal lag of 7, Section \@ref(ARIMASelection)):
```{r eval=FALSE}
ourModel <- adam(y, model="NNN", lags=7,
                 orders=list(ar=c(3,2),i=c(2,1),ma=c(3,2),select=TRUE))
```

Build ARIMA(0,1,1) with drift (Chapter \@ref(ARIMA) for the general ARIMA and Section \@ref(ARMAConstant) for the one with constant):
```{r eval=FALSE}
ourModel <- adam(y, model="NNN",
                 orders=c(0,1,1), constant=TRUE)
```

Estimate ETS(A,N,N)+ARIMA(1,0,0) model (Sections \@ref(ARIMAandETS) and \@ref(ETSAndARIMA)):
```{r eval=FALSE}
ourModel <- adam(y, model="ANN", orders=c(1,0,0))
```

Use Generalised Normal distribution for the residuals of ADAM ETS(A,A,N) (Sections \@ref(ADAMETSAdditiveDistributions), \@ref(ADAMETSMultiplicativeDistributions) and \@ref(ADAMETSEstimationLikelihood)):
```{r eval=FALSE}
ourModel <- adam(y, model="AAN", distribution="dgnorm")
```

Select the best distribution for the specific ADAM ETS(A,A,N) (Chapter \@ref(ADAMSelection)):
```{r eval=FALSE}
ourModel <- auto.adam(y, model="AAN")
```

Select the most appropriate ETSX model for the provided `data` (which can be any 2-dimensional object, such as `matrix`, `data.frame` or `tibble`, see Chapter \@ref(ADAMX)):
```{r eval=FALSE}
ourModel <- adam(data)
```

Specify, which explanatory variables to include and in what form (Section \@ref(ADAMXFormulation)):
```{r eval=FALSE}
ourModel <- adam(data, formula=y~x1+x2+I(x2^2))
```

Select the set of explanatory variables for ETSX(M,N,N) based on AIC (Section \@ref(ETSXSelection)):
```{r eval=FALSE}
ourModel <- adam(data, model="MNN",
                 regressors="select", ic="AIC")
```

Estimate ETS(A,Ad,N) model using a multistep loss function, GTMSE (Section \@ref(multistepLosses)):
```{r eval=FALSE}
ourModel <- adam(y, model="AAdN",
                 h=10, loss="GTMSE")
```

Estimate ARIMA(1,1,2) using a multistep loss function (Section \@ref(multistepLosses)) with backcasting of initials (Section \@ref(ADAMInitialisation)):
```{r eval=FALSE}
ourModel <- adam(y, model="NNN", orders=c(1,1,2),
                 h=10, loss="GTMSE", initial="backcasting")
```

Select and estimate the most appropriate ETS model on the data with multiple frequencies (Chapter \@ref(ADAMMultipleFrequencies)):
```{r eval=FALSE}
ourModel <- adam(y, model="ZXZ", lags=c(24,24*7,24*365))
```

Select and estimate the triple seasonal ARIMA on the data with multiple frequencies (Chapter \@ref(ADAMMultipleFrequencies)):
```{r eval=FALSE}
ourModel <- adam(y, model="NNN", lags=c(1,24,24*7,24*365),
                 orders=list(ar=c(3,2,2,2),i=c(2,1,1,1),ma=c(3,2,2,2),select=TRUE),
                 initial="backcasting")
```

Apply an automatically selected occurrence part of the model to intermittent data (Section \@ref(ADAMOccurrence)):
```{r eval=FALSE}
oesModel <- oes(y, model="YYY", occurrence="auto")
```

Use the estimated occurrence model in `adam()` to model intermittent data (Section \@ref(ADAMDemandSizes)):
```{r eval=FALSE}
ourModel <- adam(y, model="YYY", occurrence=oesModel)
```

Or alternatively just use the same model for occurrence and demand sizes part (Chapter \@ref(ADAMIntermittent)):
```{r eval=FALSE}
ourModel <- adam(y, model="YYY", occurrence="auto")
```

Estimate the scale model for previously estimated ADAM (Chapter \@ref(ADAMscaleModel)):
```{r eval=FALSE}
scaleModel <- sm(ourModel, model="YYY")
```

Implant the scale model into the ADAM for future use (e.g. for forecasting):
```{r eval=FALSE}
mergedModel <- implant(ourModel, scaleModel)
```

Produce diagnostics plots to see if the ADAM can be improved any further (Chapter \@ref(diagnostics)):
```{r eval=FALSE}
par(mfcol=c(2,2))
plot(ourModel, which=c(1,2,4,6))
```

Extract conventional, standardised and studentised residuals (Chapter \@ref(diagnostics)):
```{r eval=FALSE}
residuals(ourModel)
rstandard(ourModel)
rstudent(ourModel)
```

Plot time series decomposition according to ADAM ETS (Section \@ref(ETSTaxonomy)):
```{r eval=FALSE}
plot(ourModel, which=12)
```

Produce point forecast and prediction interval from ADAM for 10 steps ahead (Chapter \@ref(ADAMForecasting)):
```{r eval=FALSE}
forecast(ourModel, h=10, interval="prediction")
```

Produce point forecast and prediction interval for ADAM, cumulative over the lead time of 10 (Subsection \@ref(forecastingADAMOtherCumulative)):
```{r eval=FALSE}
forecast(ourModel, h=10, interval="prediction",
         cumulative=TRUE)
```

Produce point forecast and empirical prediction interval for upper bound (upper quantile of distribution, Sections \@ref(ADAMForecastingPIEmpirical) and \@ref(forecastingADAMOtherOneSided)):
```{r eval=FALSE}
forecast(ourModel, h=10, interval="empirical",
         side="upper")
```

Produce summary of ADAM (Chapter \@ref(ADAMUncertainty)):
```{r eval=FALSE}
summary(ourModel)
```

Reapply ADAM with randomly selected initials and parameters (to capture the uncertainty of parameters) and produce forecasts from each of these models (Section \@ref(adamRefitted)):
```{r eval=FALSE}
reapply(ourModel)
reforecast(ourModel, h=10, interval="prediction")
```

Extract multistep forecast errors from ADAM (Subsection \@ref(diagnosticsResidualsIIDExpectationMultiple)):
```{r eval=FALSE}
rmultistep(ourModel, h=10)
```

Extract covariance matrix of multistep forecast errors from ADAM (Section \@ref(multistepLosses)):
```{r eval=FALSE}
multicov(ourModel, h=10)
```

Extract actual and fitted values from ADAM:
```{r eval=FALSE}
actuals(ourModel)
fitted(ourModel)
```
